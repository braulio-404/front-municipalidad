<div class="container">
  <!-- Mostrar el formulario de postulación cuando sea necesario -->
  <ng-container *ngIf="mostrarFormulario; else listaFormularios">
    <app-postulacion-form
      [modo]="modoFormulario"
      [formularioId]="formularioSeleccionadoId"
      (formularioGuardado)="onFormularioGuardado()"
      (cancelar)="onCancelarFormulario()">
    </app-postulacion-form>
  </ng-container>
  
  <!-- Lista de formularios -->
  <ng-template #listaFormularios>
    <h1>Gestión de Formularios</h1>

    <div class="filtros-container">
      <div class="filtro">
        <label for="cargoPostulacion">Postulación:</label>
        <input 
          id="cargoPostulacion" 
          type="text" 
          [(ngModel)]="cargoPostulacion" 
          placeholder="Ingrese el Cargo de Postulación">
      </div>

      <div class="filtro fecha">
        <label>Fecha Inicio:</label>
        <input 
          type="date" 
          [(ngModel)]="fechaInicio">
      </div>

      <div class="filtro fecha">
        <label>Fecha Término:</label>
        <input 
          type="date" 
          [(ngModel)]="fechaTermino">
      </div>

      <div class="filtro estado">
        <label for="estado">Estado:</label>
        <select id="estado" [(ngModel)]="estadoSeleccionado">
          <option value="">Seleccione Estado</option>
          <option *ngFor="let estado of estadosDisponibles" [value]="estado">{{ estado }}</option>
        </select>
      </div>
      
      <div class="filtro-accion">
        <button class="btn-filtrar" (click)="filtrarFormularios()">Filtrar</button>
      </div>
    </div>

    <div class="tabla-container">
      <table>
        <thead>
          <tr>
            <th>Postulación</th>
            <th>Fecha Inicio</th>
            <th>Fecha Término</th>
            <th>Estado</th>
            <th>Gestión</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let form of formularios">
            <td>{{ form.cargo }}</td>
            <td>{{ form.fechaInicio | date:'dd/MM/yyyy' }}</td>
            <td>{{ form.fechaTermino | date:'dd/MM/yyyy' }}</td>
            <td>{{ form.estado }}</td>
            <td class="acciones">
              <button class="btn-accion" title="Ver detalles" (click)="verDetalleFormulario(form.id || 0)">
                <img src="assets/images/ver.svg" alt="Ver">
              </button>
              <button class="btn-accion" title="Editar postulación" (click)="editarFormulario(form.id || 0)">
                <img src="assets/images/editar.svg" alt="Editar">
              </button>
              <button class="btn-accion" title="Eliminar postulación" (click)="eliminarFormulario(form.id || 0)">
                <img src="assets/images/eliminar.svg" alt="Eliminar">
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="acciones-container">
      <button class="btn-crear" (click)="crearFormulario()">Crear Postulación</button>
    </div>
  </ng-template>
</div> 